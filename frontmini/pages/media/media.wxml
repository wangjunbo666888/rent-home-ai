<!-- åª’ä½“è¯¦æƒ…ï¼šå›¾ç‰‡ä¸è§†é¢‘ -->
<view class="page-media">
  <view class="header" wx:if="{{apartment}}">
    <text class="title">ğŸ“· {{apartment.name}} - å›¾ç‰‡ä¸è§†é¢‘</text>
    <text class="desc">æŸ¥çœ‹å¹¶ä¸‹è½½å…¬å¯“å®æ‹å›¾ç‰‡ä¸è§†é¢‘</text>
  </view>

  <view class="card empty-card" wx:if="{{!apartment}}">
    <text class="empty-text">æœªé€‰æ‹©å…¬å¯“ï¼Œè¯·ä»ç»“æœåˆ—è¡¨è¿›å…¥</text>
  </view>

  <block wx:elif="{{images.length === 0 && videos.length === 0}}">
    <view class="card empty-card">
      <text class="empty-text">è¯¥å…¬å¯“æš‚æ— å›¾ç‰‡æˆ–è§†é¢‘</text>
    </view>
  </block>

  <block wx:else>
    <view class="tabs">
      <view
        class="tab {{activeTab === 'images' ? 'active' : ''}}"
        wx:if="{{images.length > 0}}"
        data-tab="images"
        bindtap="switchTab"
      >
        ğŸ“· å›¾ç‰‡ ({{images.length}})
      </view>
      <view
        class="tab {{activeTab === 'videos' ? 'active' : ''}}"
        wx:if="{{videos.length > 0}}"
        data-tab="videos"
        bindtap="switchTab"
      >
        ğŸ¬ è§†é¢‘ ({{videos.length}})
      </view>
    </view>

    <view class="media-section" wx:if="{{activeTab === 'images' && images.length > 0}}">
      <view
        class="media-card image-card"
        wx:for="{{images}}"
        wx:key="index"
      >
        <image
          class="preview-img"
          src="{{item.url || item}}"
          mode="widthFix"
          data-url="{{item.url || item}}"
          bindtap="onPreviewImage"
        />
        <text class="media-title" wx:if="{{item.title}}">{{item.title}}</text>
        <button
          class="btn-save"
          data-url="{{item.url || item}}"
          data-name="{{item.title || 'å›¾ç‰‡'}}"
          bindtap="onSaveImage"
        >
          â¬‡ ä¿å­˜å›¾ç‰‡
        </button>
      </view>
    </view>

    <view class="media-section" wx:if="{{activeTab === 'videos' && videos.length > 0}}">
      <view
        class="media-card video-card"
        wx:for="{{videos}}"
        wx:key="index"
      >
        <video
          class="preview-video"
          src="{{item.url || item}}"
          controls
          show-center-play-btn
          object-fit="contain"
        />
        <text class="media-title" wx:if="{{item.title}}">{{item.title}}</text>
      </view>
    </view>
  </block>
</view>
