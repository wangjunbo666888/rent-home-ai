<!-- ç»“æœé¡µï¼šåˆ—è¡¨ + åœ°å›¾ -->
<view class="page-results">
  <view class="header">
    <text class="title">ğŸ  æ™ºèƒ½ç§Ÿæˆ¿åŒ¹é…ç³»ç»Ÿ</text>
    <text class="desc">æ ¹æ®ä¸Šç­åœ°ç‚¹ã€é€šå‹¤æ—¶é•¿å’Œé¢„ç®—ï¼Œæ™ºèƒ½åŒ¹é…æœ€é€‚åˆçš„å…¬å¯“</text>
  </view>

  <view class="card" wx:if="{{results.length === 0}}">
    <view class="empty">æš‚æ— åŒ¹é…ç»“æœ</view>
  </view>

  <block wx:else>
    <view class="card summary-card">
      <text class="summary-title">æ‰¾åˆ° {{results.length}} ä¸ªç¬¦åˆæ¡ä»¶çš„å…¬å¯“</text>
      <view class="search-summary" wx:if="{{searchParams}}">
        <text class="tag">ä¸Šç­åœ°å€ï¼š{{searchParams.workAddress}}</text>
        <text class="tag">é€šå‹¤æ—¶é•¿ï¼šâ‰¤{{searchParams.commuteTime}}åˆ†é’Ÿ</text>
        <text class="tag">é¢„ç®—ï¼šâ‰¤{{searchParams.budget}}å…ƒ</text>
      </view>
    </view>

    <view class="content">
      <scroll-view class="list-wrap" scroll-y enhanced show-scrollbar="{{false}}">
        <view
          class="apartment-card"
          wx:for="{{results}}"
          wx:key="id"
        >
          <view class="card-header">
            <text class="apartment-name">{{item.name}}</text>
            <text class="top-badge" wx:if="{{index < 3}}">TOP {{index + 1}}</text>
          </view>
          <view class="info-row">
            <text class="label">ğŸ’° ä»·æ ¼ï¼š</text>
            <text class="value price">{{item.priceText}}</text>
          </view>
          <view class="info-row">
            <text class="label">â±ï¸ é€šå‹¤ï¼š</text>
            <text class="value">{{item.commuteTime}}åˆ†é’Ÿ</text>
            <text class="distance" wx:if="{{item.distanceText}}">ï¼ˆ{{item.distanceText}}ï¼‰</text>
          </view>
          <view class="info-row">
            <text class="label">ğŸ“ åœ°å€ï¼š</text>
            <text class="value address">{{item.address}}</text>
          </view>
          <view class="info-row" wx:if="{{item.district}}">
            <text class="label">ğŸ˜ï¸ åŒºåŸŸï¼š</text>
            <text class="value">{{item.district}}</text>
          </view>
          <view class="info-row" wx:if="{{item.remarks}}">
            <text class="label">ğŸ“ å¤‡æ³¨ï¼š</text>
            <text class="value remarks">{{item.remarks}}</text>
          </view>
          <view class="recommendation" wx:if="{{item.recommendation}}">
            <text class="rec-title">ğŸ’¡ æ¨èç†ç”±ï¼š</text>
            <text class="rec-text">{{item.recommendation}}</text>
          </view>
          <view class="route" wx:if="{{item.commuteRoute && item.commuteRoute !== 'å…¬å…±äº¤é€š'}}">
            <text class="route-title">ğŸš‡ è·¯çº¿ï¼š</text>
            <text class="route-text">{{item.commuteRoute}}</text>
          </view>
          <button class="btn-media" data-index="{{index}}" bindtap="goMedia">ğŸ“· æŸ¥çœ‹å›¾ç‰‡ä¸è§†é¢‘</button>
        </view>
      </scroll-view>

      <view class="map-wrap">
        <map
          class="map"
          latitude="{{latitude}}"
          longitude="{{longitude}}"
          scale="{{scale}}"
          markers="{{markers}}"
          show-location
        />
      </view>
    </view>
  </block>
</view>
